{
  "version": 3,
  "sources": ["../src/app/lib/Dom.ts", "../src/app/framework/colors.ts", "../src/app/framework/html.ts", "../src/app/lib/Feds.ts", "../src/app/pages/DesignSystem.ts", "../src/main.ts"],
  "sourcesContent": ["type Attr<T> = [keyof T, string];\n\nexport function useDom<T extends HTMLElement>(\n  selector: string,\n  ...attrs: Attr<T>[]\n): [(...children: (HTMLElement | Node)[]) => void, (...attrs: Attr<T>[]) => void] {\n  let element: T = document.querySelector(selector);\n  const setAttrs = (...attrs: Attr<T>[]): void => attrs.forEach(([k, v]) => (element[k] = v as any));\n\n  if (!element) {\n    window.addEventListener('DOMContentLoaded', () => {\n      element = document.querySelector(selector);\n      setAttrs(...attrs);\n    });\n  } else {\n    setAttrs(...attrs);\n  }\n  const setHtml = (...children: (HTMLElement | Node)[]) => {\n    element.innerHTML = '';\n    children.forEach((child) => element.appendChild(child));\n  };\n  return [setHtml, setAttrs];\n}\n", "export const Colors = {\n  black: [0, 0, 5],\n  brown: [44, 11, 14],\n  red: [0, 100, 50],\n  blue: [240, 100, 50],\n  yellow: [55, 100, 50],\n  green: [118, 100, 50],\n  purple: [270, 100, 50],\n  orange: [30, 100, 50],\n  transparent: 'transparent',\n  white: [0, 0, 100],\n};\n\nexport const Color = (color: keyof typeof Colors, adjustLightness: number = 0, opacity: number = 1) => {\n  if (color === 'transparent') return color;\n  const [h, s, l] = Colors[color];\n  const hsla = `hsla(${h}deg,${s}%,${l + adjustLightness}%,${opacity})`;\n  return hsla;\n};\n", "import { Colors } from '@lib/Palette';\nimport { Color as ColorFunc } from './colors';\n\ntype Machine<Context, Actions, Messages> = {\n  get: (key: keyof Context) => Context[keyof Context];\n  pub: (message: Messages) => void;\n  sub: (key: Actions, cb: (context: Context) => any) => void;\n};\n\ntype OmitFirstArg<T> = T extends (x: any, ...args: infer P) => infer R ? (...args: P) => R : never;\n\n// Html Template engine\ntype Tags = keyof HTMLElementTagNameMap;\ntype FeatureProp = string;\ntype FeatureFunc = (el: HTMLElement, ...a: any) => any;\ntype FeatureParams<T> = Parameters<OmitFirstArg<T>>;\n\nexport const Html =\n  <T extends Record<FeatureProp, FeatureFunc>>(features: T) =>\n  <KS extends Array<keyof T>>(\n    tag: Tags,\n    ...attrs: { [I in keyof KS]-?: [KS[I], ...FeatureParams<T[Extract<KS[I], keyof T>]>] }\n  ) =>\n  (...children: (HTMLElement | string | number | SVGElement)[]) => {\n    // Create element\n    const el = document.createElementNS('http://www.w3.org/1999/xhtml', tag);\n    let render = true;\n\n    // Run features\n    attrs.forEach(([attr, ...args]) => {\n      const feature = features[attr](el, ...args);\n      // if the feature func returns a false, don't render\n      if (feature === false) render = false;\n    });\n\n    if (!render) return null;\n\n    // Append children\n    children.forEach((child) => {\n      if (child instanceof Node) el.appendChild(child);\n      if (typeof child === 'string' || typeof child === 'number') el.innerHTML += child;\n    });\n\n    return el;\n  };\n\n// Features\n\nexport const Attr = (el: HTMLElement, prop: string, val: string) => el.setAttribute(prop, String(val));\nexport const If = (_: any, condition: boolean) => condition;\nexport const Color = (el: HTMLElement, color: keyof typeof Colors) => (el.style.color = ColorFunc(color));\nexport const OnClick = (el: HTMLElement, cb: () => void) => el.addEventListener('click', cb);\n\nexport const OnMachine =\n  <Context, Action, Messages>(machine: Machine<Context, Action, Messages>) =>\n  (el: HTMLElement, action: Action, cb: (el: HTMLElement, context: Context) => any) =>\n    machine.sub(action, (context) => cb(el, context));\n\nexport const OnMachineAttr =\n  <Context, Action, Messages>(machine: Machine<Context, Action, Messages>) =>\n  (el: HTMLElement, action: Action, cb: (context: Context) => [string, string | number]) =>\n    machine.sub(action, (context) => {\n      const [prop, val] = cb(context);\n      el.setAttribute(prop, String(val));\n    });\n\nexport const OnMachineClass =\n  <Context, Action, Messages>(machine: Machine<Context, Action, Messages>) =>\n  (el: HTMLElement, action: Action, cb: (context: Context) => string) =>\n    machine.sub(action, (context) => {\n      el.className = cb(context);\n    });\n\nexport const OnMachineInnerText =\n  <Context, Action, Messages>(machine: Machine<Context, Action, Messages>) =>\n  (el: HTMLElement, action: Action, cb: (context: Context) => any) =>\n    machine.sub(action, (context) => {\n      el.innerText = cb(context);\n    });\n\nexport const OnMachineInnerHtml =\n  <Context, Action, Messages>(machine: Machine<Context, Action, Messages>) =>\n  (el: HTMLElement, action: Action, cb: (context: Context) => any) =>\n    machine.sub(action, (context) => {\n      el.innerHTML = '';\n      const content = cb(context);\n      if (content) el.appendChild(content);\n    });\n\nexport const OnTextInput = (el: HTMLInputElement, cb: (val: string) => void) =>\n  el.addEventListener('input', () => cb(el.value));\n\nexport const FontSize = (el: HTMLElement, size: number) => (el.style.fontSize = `${size}px`);\n", "/**\n * Machine\n */\n\ntype MachineSubscription<Context, Actions> = { action: Actions; cb: (context: Context) => void };\nexport const useMachine = <Context, Actions, Messages extends { action: Actions; payload?: Partial<Context> }>(\n  context: Context,\n  machine: (message: Messages, context: Context) => Context,\n): {\n  get: (key: keyof Context) => Context[keyof Context];\n  pub: (message: Messages) => void;\n  sub: (key: Actions, cb: (context: Context) => void) => void;\n} => {\n  let _context: Context = context;\n  const _subs: MachineSubscription<Context, Actions>[] = [];\n\n  const sub = (action: Actions, cb: (context: Context) => void) => {\n    _subs.push({\n      action,\n      cb,\n    });\n  };\n\n  const get = (key: keyof Context) => {\n    return _context[key];\n  };\n\n  const pub = (message: Messages & { action: string }) => {\n    _context = machine(message, _context);\n    _subs.filter((sub) => sub['action'] === message['action']).forEach((i) => i.cb(_context));\n    return _context;\n  };\n\n  return {\n    get,\n    pub,\n    sub,\n  };\n};\n\n// /**\n//  * A miniature \"Event Bus\"\n//  */\n// type Pub = (eventName: string) => void;\n// type Sub = (eventName: string, cb: Function) => void;\n// type Subscriber = { eventName: string; cb: Function };\n\n// export const useSignal = (..._: string[]): [Pub, Sub] => {\n//   const subscribers: Subscriber[] = [];\n//   const pub: Pub = (eventName: string) => subscribers.filter((i) => i.eventName === eventName).forEach((i) => i.cb());\n//   const sub: Sub = (eventName: string, cb: Function) => subscribers.push({ eventName, cb });\n//   return [pub, sub];\n// };\n\n// /**\n//  * Model\n//  */\n// type ModelSubscription<T> = { key: keyof T; cb: (val: T[keyof T]) => void };\n// export const useModel = <T>(\n//   model: T,\n// ): {\n//   get: (key: keyof T) => T[keyof T];\n//   set: (key: keyof T, val: T[keyof T]) => T[keyof T];\n//   sub: (key: keyof T, cb: (val: T[keyof T]) => void) => void;\n// } => {\n//   const _model: T = model;\n//   const _subscriptions: ModelSubscription<T>[] = [];\n\n//   const subscriber = (key: keyof T, cb: (val: T[keyof T]) => void) => {\n//     _subscriptions.push({\n//       key,\n//       cb,\n//     });\n//   };\n\n//   const getter = (key: keyof T) => {\n//     return _model[key];\n//   };\n\n//   const setter = (key: keyof T, val: T[keyof T]) => {\n//     _model[key] = val;\n//     _subscriptions.filter((i) => i.key === key).forEach((i) => i.cb(_model[key]));\n//     return _model[key];\n//   };\n\n//   return {\n//     get: getter,\n//     set: setter,\n//     sub: subscriber,\n//   };\n// };\n", "import {\n  Attr,\n  Color,\n  FontSize,\n  Html,\n  If,\n  OnClick,\n  OnMachine,\n  OnMachineAttr,\n  OnMachineClass,\n  OnMachineInnerHtml,\n  OnMachineInnerText,\n  OnTextInput,\n} from '@framework/html';\nimport { useMachine } from '@lib/Feds';\n\ntype Context = {\n  todo: string;\n  state?: 'IDLE';\n};\n\ntype Messages = { action: 'TODO_UPDATE'; payload: Context } | { action: 'SUBMIT' };\n\nconst machine = useMachine<Context, Messages['action'], Messages>(\n  { todo: 'test', state: 'IDLE' },\n  (message: Messages, context: Context) => {\n    switch (context.state) {\n      case 'IDLE':\n        switch (message.action) {\n          case 'TODO_UPDATE':\n            context = { ...context, todo: message.payload.todo };\n            break;\n          case 'SUBMIT':\n            console.log(context);\n            break;\n        }\n    }\n    return context;\n  },\n);\n\n// const Machine =\n//   <T extends Record<State, (...args: any) => State>, State extends string, Context>(config: T) =>\n//   (context: Context) => {};\n\nexport const DesignSystem = () => {\n  const $ = Html({\n    color: Color,\n    attr: Attr,\n    if: If,\n    on_click: OnClick,\n    machine: OnMachine<Context, Messages['action'], Messages>(machine),\n    machine_text: OnMachineInnerText<Context, Messages['action'], Messages>(machine),\n    machine_html: OnMachineInnerHtml<Context, Messages['action'], Messages>(machine),\n    machine_attr: OnMachineAttr<Context, Messages['action'], Messages>(machine),\n    machine_class: OnMachineClass<Context, Messages['action'], Messages>(machine),\n    on_input: OnTextInput,\n    font_size: FontSize,\n  });\n\n  const template = $('div')(\n    $('h1', ['color', 'blue'])('ExampleApp'),\n    $('h2', ['font_size', 24])('subtitle'),\n    $('div', ['machine_text', 'TODO_UPDATE', (ctx) => ctx.todo])('...'),\n    $(\n      'div',\n      ['machine_html', 'TODO_UPDATE', (ctx) => (ctx.todo.length > 2 ? $('div')(ctx.todo + '---') : null)],\n      ['machine_attr', 'TODO_UPDATE', (ctx) => ['data-len', ctx.todo.length]],\n      ['machine_attr', 'TODO_UPDATE', (ctx) => ['data-len2', ctx.todo.length]],\n      ['machine_class', 'TODO_UPDATE', (ctx) => `one two-${ctx.todo.length}`],\n    )('...html'),\n    $('form')(\n      $('fieldset')(\n        $('legend')('to dos'),\n        $('input', ['on_input', (val) => machine.pub({ action: 'TODO_UPDATE', payload: { todo: val } })])(),\n        $('button', ['on_click', () => machine.pub({ action: 'SUBMIT' })])('Submit'),\n      ),\n    ),\n  );\n\n  return template;\n};\n\n// const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';\n", "import { useDom } from '@lib/Dom';\nimport { DesignSystem } from '@pages/DesignSystem';\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  const resetStyle = `margin:0px;padding:0px;width:100vw;height:100vh;`;\n  const [body] = useDom('body', ['style', resetStyle]);\n  body(DesignSystem());\n});\n"],
  "mappings": "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",
  "names": []
}
